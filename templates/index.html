<!DOCTYPE html>
<html lang="en">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-CDYX6KH44X"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-CDYX6KH44X');
</script>
<!-- ✅ Google AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7998800421976252" crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grant Genius Hub - AI-Powered Grant Assistant</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            color: white;
            text-decoration: none;
        }

        .nav-links {
            display: flex;
            gap: 20px;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 25px;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.1);
        }

        .nav-links a:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .nav-links a.active {
            background: rgba(255, 255, 255, 0.3);
        }

        .hero {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .hero p {
            font-size: 1.3rem;
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .hero .subtext {
            font-size: 1.1rem;
            opacity: 0.8;
        }

        .main-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .assistant-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
        }

        .assistant-avatar {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
        }

        .assistant-info h2 {
            color: #333;
            font-size: 1.8rem;
            margin-bottom: 5px;
        }

        .assistant-info p {
            color: #666;
            font-size: 1.1rem;
        }

        .categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .category {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .category:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            border-color: #667eea;
        }

        .category-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .category h3 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .category p {
            color: #666;
            font-size: 0.9rem;
        }

        .assistant-message {
            background: rgba(102, 126, 234, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            border-left: 4px solid #667eea;
        }

        .assistant-message .message-avatar {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: white;
            float: left;
            margin-right: 15px;
        }

        .assistant-message .message-content {
            color: #555;
            font-size: 1rem;
            line-height: 1.6;
        }

        .form-container {
            margin-top: 30px;
        }

        .form-group {
            position: relative;
            margin-bottom: 20px;
        }

        .form-group textarea {
            width: 100%;
            min-height: 120px;
            padding: 20px;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            font-size: 1rem;
            font-family: inherit;
            resize: vertical;
            transition: all 0.3s ease;
            background: white;
        }

        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .form-group textarea::placeholder {
            color: #999;
        }

        .char-counter {
            position: absolute;
            bottom: 10px;
            right: 15px;
            font-size: 0.8rem;
            color: #999;
        }

        .submit-container {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .btn-primary:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
            border: 1px solid rgba(102, 126, 234, 0.3);
        }

        .btn-secondary:hover {
            background: rgba(102, 126, 234, 0.2);
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
            color: #667eea;
        }

        .loading.active {
            display: block;
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error-message {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 1px solid #f5c6cb;
        }

        .quick-actions {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .quick-action {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(102, 126, 234, 0.2);
        }

        .quick-action:hover {
            background: rgba(102, 126, 234, 0.2);
            transform: translateY(-1px);
        }

        @media (max-width: 768px) {
            .nav {
                flex-direction: column;
                gap: 15px;
            }

            .nav-links {
                flex-wrap: wrap;
                justify-content: center;
            }

            .hero h1 {
                font-size: 2.5rem;
            }

            .main-card {
                padding: 20px;
            }

            .categories {
                grid-template-columns: 1fr;
            }

            .assistant-header {
                flex-direction: column;
                text-align: center;
            }

            .submit-container {
                flex-direction: column;
            }
        }
/* Walking AI Character */
.walking-ai {
    position: fixed;
    width: 100px;
    height: 120px;
    z-index: 9999;
    cursor: pointer;
    transition: none;
    pointer-events: auto;
}

.ai-character-body {
    position: relative;
    width: 60px;
    height: 80px;
    margin: 0 auto;
}

.ai-head {
    width: 50px;
    height: 50px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    border-radius: 50%;
    position: relative;
    margin: 0 auto 5px;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
    animation: headBob 0.6s ease-in-out infinite alternate;
}

.ai-eyes {
    position: absolute;
    top: 15px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 8px;
}

.eye {
    width: 8px;
    height: 8px;
    background: white;
    border-radius: 50%;
    animation: eyeBlink 3s infinite;
}

.ai-mouth {
    position: absolute;
    bottom: 15px;
    left: 50%;
    transform: translateX(-50%);
    width: 12px;
    height: 6px;
    background: white;
    border-radius: 0 0 12px 12px;
    animation: mouthTalk 0.8s ease-in-out infinite;
}

.ai-torso {
    width: 40px;
    height: 35px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    border-radius: 8px;
    margin: 0 auto 5px;
    position: relative;
    box-shadow: 0 2px 10px rgba(102, 126, 234, 0.3);
}

.ai-arms {
    position: absolute;
    width: 60px;
    height: 20px;
    top: 10px;
    left: 50%;
    transform: translateX(-50%);
}

.arm {
    position: absolute;
    width: 15px;
    height: 25px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    border-radius: 8px;
    animation: armSwing 0.6s ease-in-out infinite alternate;
}

.arm.left {
    left: -10px;
    transform-origin: top center;
}

.arm.right {
    right: -10px;
    transform-origin: top center;
    animation-delay: 0.3s;
}

.ai-legs-container {
    position: relative;
    width: 40px;
    height: 30px;
    margin: 0 auto;
}

.leg {
    position: absolute;
    width: 12px;
    height: 25px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    border-radius: 6px;
    transform-origin: top center;
    animation: legWalk 0.6s ease-in-out infinite;
}

.leg.left {
    left: 8px;
}

.leg.right {
    right: 8px;
    animation-delay: 0.3s;
}

.ai-shadow {
    position: absolute;
    bottom: -10px;
    left: 50%;
    transform: translateX(-50%);
    width: 40px;
    height: 8px;
    background: rgba(0, 0, 0, 0.2);
    border-radius: 50%;
    animation: shadowMove 0.6s ease-in-out infinite alternate;
}

/* Speech Bubble */
.speech-bubble {
    position: absolute;
    background: white;
    border: 3px solid #667eea;
    border-radius: 20px;
    padding: 10px 15px;
    max-width: 200px;
    font-size: 14px;
    font-weight: 500;
    color: #333;
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
    opacity: 0;
    transform: translateY(10px);
    transition: all 0.3s ease;
    z-index: 10000;
    white-space: nowrap;
    top: -60px;
    left: 50%;
    transform: translateX(-50%) translateY(10px);
}

.speech-bubble.show {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
}

.speech-bubble::after {
    content: '';
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;
    border-top: 10px solid #667eea;
}

/* Animations */
@keyframes headBob {
    0% { transform: translateY(0px); }
    100% { transform: translateY(-3px); }
}

@keyframes eyeBlink {
    0%, 95% { transform: scaleY(1); }
    97% { transform: scaleY(0.1); }
    99% { transform: scaleY(1); }
}

@keyframes mouthTalk {
    0%, 100% { transform: translateX(-50%) scaleY(1); }
    50% { transform: translateX(-50%) scaleY(0.5); }
}

@keyframes armSwing {
    0% { transform: rotate(-15deg); }
    100% { transform: rotate(15deg); }
}

@keyframes legWalk {
    0% { transform: rotate(-20deg); }
    50% { transform: rotate(0deg); }
    100% { transform: rotate(20deg); }
}

@keyframes shadowMove {
    0% { transform: translateX(-50%) scale(1); }
    100% { transform: translateX(-50%) scale(0.8); }
}

.walking-ai.talking .ai-mouth {
    animation: mouthTalk 0.3s ease-in-out infinite;
}

.walking-ai.talking .ai-head {
    animation: headBob 0.4s ease-in-out infinite alternate;
}      
    </style>
</head>
<body>
    <div class="container">
        <header>
            <nav class="nav">
                <a href="{{ url_for('home') }}" class="logo">Grant Genius Hub</a>
                <div class="nav-links">
                    <a href="{{ url_for('home') }}" class="active">Home</a>
                    <a href="{{ url_for('about') }}">About</a>
                    <a href="{{ url_for('templates_page') }}">Templates</a>
                </div>
            </nav>
        </header>

        <div class="hero">
            <h1>Grant Genius Hub</h1>
            <p>Your AI-Powered Grant Assistant</p>
            <div class="subtext">Transform your funding ideas into professional grant proposals with intelligent conversation</div>
        </div>

        <div class="main-card">
            <div class="assistant-header">
                <div class="assistant-avatar">🤖</div>
                <div class="assistant-info">
                    <h2>Grant Assistant</h2>
                    <p>Tell me about your project and I'll help you create the perfect grant proposal!</p>
                </div>
            </div>

            <div class="categories">
                <div class="category" onclick="selectCategory('nonprofit')">
                    <div class="category-icon">🏛️</div>
                    <h3>Nonprofit & Community</h3>
                    <p>Social services, community development, charitable organizations</p>
                </div>
                <div class="category" onclick="selectCategory('education')">
                    <div class="category-icon">🎓</div>
                    <h3>Education & Research</h3>
                    <p>Schools, universities, research projects, educational programs</p>
                </div>
                <div class="category" onclick="selectCategory('health')">
                    <div class="category-icon">🏥</div>
                    <h3>Health & Medical</h3>
                    <p>Healthcare initiatives, medical research, public health</p>
                </div>
                <div class="category" onclick="selectCategory('environmental')">
                    <div class="category-icon">🌱</div>
                    <h3>Environmental</h3>
                    <p>Sustainability, conservation, climate change, green technology</p>
                </div>
            </div>

            <div class="assistant-message">
                <div class="message-avatar">🤖</div>
                <div class="message-content">
                    Hello! I'm your Grant Assistant. I can help you create professional grant proposals for any type of project. Click on a grant type above or simply describe your project in detail below. What kind of funding are you looking for?
                </div>
            </div>

            {% if error %}
            <div class="error-message">
                {{ error }}
            </div>
            {% endif %}

            <form method="POST" action="{{ url_for('generate_grant_response') }}" id="grantForm">
                <div class="form-container">
                    <div class="quick-actions">
                        <span class="quick-action" onclick="addQuickText('I need help writing a problem statement for')">Problem Statement</span>
                        <span class="quick-action" onclick="addQuickText('I need a budget justification for')">Budget Justification</span>
                        <span class="quick-action" onclick="addQuickText('I need an evaluation plan for')">Evaluation Plan</span>
                        <span class="quick-action" onclick="addQuickText('I need a methodology section for')">Methodology</span>
                    </div>

                    <div class="form-group">
                        <textarea 
                            name="prompt" 
                            id="prompt" 
                            placeholder="Describe your project in detail. Include information about your organization, target population, objectives, and what type of grant section you need help with..."
                            required
                            oninput="updateCharCount()"
                        ></textarea>
                        <div class="char-counter">
                            <span id="charCount">0</span> characters
                        </div>
                    </div>

                    <div class="submit-container">
                        <a href="{{ url_for('templates_page') }}" class="btn btn-secondary">Use Templates</a>
                        <button type="submit" class="btn btn-primary" id="submitBtn">
                            <span>Generate Proposal</span>
                            <span>→</span>
                        </button>
                    </div>
                </div>
            </form>

            <div class="loading" id="loadingDiv">
                <div class="spinner"></div>
                <p>Generating your grant proposal content...</p>
            </div>
        </div>

        <hr style="margin: 50px 0; border: 1px solid rgba(255,255,255,0.2);">
        <h2 style="color: white; margin-bottom: 10px;">Find Real Grants Near You</h2>
        <form id="liveSearchForm" style="margin-bottom: 30px;">
            <input type="text" id="liveQuery" placeholder="What kind of grant?" required style="padding: 10px; width: 40%; border-radius: 10px; border: none; margin-right: 10px;">
            <input type="text" id="liveLocation" placeholder="City or State" style="padding: 10px; width: 25%; border-radius: 10px; border: none; margin-right: 10px;">
            <button type="submit" class="btn btn-primary">Search Grants</button>
        </form>
        <div id="liveResults" style="background: white; border-radius: 15px; padding: 20px;"></div>
    </div>

    <script>
        function updateCharCount() {
            const textarea = document.getElementById('prompt');
            const charCount = document.getElementById('charCount');
            charCount.textContent = textarea.value.length;
        }

        function selectCategory(category) {
            const textarea = document.getElementById('prompt');
            let prompt = '';
            
            switch(category) {
                case 'nonprofit':
                    prompt = 'I need help writing a grant proposal for a nonprofit organization focused on ';
                    break;
                case 'education':
                    prompt = 'I need help writing a grant proposal for an educational project that ';
                    break;
                case 'health':
                    prompt = 'I need help writing a grant proposal for a health/medical initiative that ';
                    break;
                case 'environmental':
                    prompt = 'I need help writing a grant proposal for an environmental project that ';
                    break;
            }
            
            textarea.value = prompt;
            textarea.focus();
            updateCharCount();
        }

        function addQuickText(text) {
            const textarea = document.getElementById('prompt');
            textarea.value = text + ' ';
            textarea.focus();
            updateCharCount();
        }

        // Handle form submission
        document.getElementById('grantForm').addEventListener('submit', function(e) {
            const submitBtn = document.getElementById('submitBtn');
            const loadingDiv = document.getElementById('loadingDiv');
            
            // Show loading state
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<span>Generating...</span>';
            loadingDiv.classList.add('active');
        });

        // Check for template from localStorage (from templates page)
        window.addEventListener('load', function() {
            const selectedTemplate = localStorage.getItem('selectedTemplate');
            if (selectedTemplate) {
                document.getElementById('prompt').value = selectedTemplate;
                updateCharCount();
                localStorage.removeItem('selectedTemplate');
            }
        });

        document.getElementById('liveSearchForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const query = document.getElementById('liveQuery').value;
            const location = document.getElementById('liveLocation').value;
            const resultsDiv = document.getElementById('liveResults');
            
            resultsDiv.innerHTML = `<p style="color:#666">Searching...</p>`;
            try {
                const res = await fetch(`/search?query=${encodeURIComponent(query)}&location=${encodeURIComponent(location)}`);
                const data = await res.json();
                if (!data.items) {
                    resultsDiv.innerHTML = "<p>No results found.</p>";
                    return;
                }
                resultsDiv.innerHTML = data.items.map(item => `
                    <div style="margin-bottom: 20px;">
                        <h3><a href="${item.link}" target="_blank" style="color:#667eea;">${item.title}</a></h3>
                        <p style="color:#333;">${item.snippet}</p>
                    </div>
                `).join('');
            } catch (error) {
                resultsDiv.innerHTML = "<p style='color:red;'>Error fetching results. Try again.</p>";
            }
        });

        // Initialize character count
        updateCharCount();
    </script>
<div class="main-card">
    <div class="assistant-header">
        <div class="assistant-avatar">🔒</div>
        <div class="assistant-info">
            <h2>Privacy Policy</h2>
            <p>Your privacy and data security are our top priorities</p>
        </div>
    </div>
    
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; margin-bottom: 30px;">
        <div style="background: rgba(102, 126, 234, 0.1); border-radius: 15px; padding: 20px; border-left: 4px solid #667eea;">
            <h3 style="color: #667eea; margin-bottom: 10px; font-size: 1.2rem;">📋 Information We Collect</h3>
            <p style="color: #555; margin: 0;">Project descriptions, organizational details, and information you submit to generate grant proposals.</p>
        </div>
        
        <div style="background: rgba(102, 126, 234, 0.1); border-radius: 15px; padding: 20px; border-left: 4px solid #667eea;">
            <h3 style="color: #667eea; margin-bottom: 10px; font-size: 1.2rem;">🔧 How We Use Your Data</h3>
            <p style="color: #555; margin: 0;">Generate proposals, improve AI performance, provide support, and analyze usage patterns.</p>
        </div>
        
        <div style="background: rgba(102, 126, 234, 0.1); border-radius: 15px; padding: 20px; border-left: 4px solid #667eea;">
            <h3 style="color: #667eea; margin-bottom: 10px; font-size: 1.2rem;">🛡️ Data Security</h3>
            <p style="color: #555; margin: 0;">We implement robust security measures to protect against unauthorized access, alteration, or destruction.</p>
        </div>
        
        <div style="background: rgba(102, 126, 234, 0.1); border-radius: 15px; padding: 20px; border-left: 4px solid #667eea;">
            <h3 style="color: #667eea; margin-bottom: 10px; font-size: 1.2rem;">⏰ Data Retention</h3>
            <p style="color: #555; margin: 0;">Information retained only as long as necessary to provide services and comply with legal obligations.</p>
        </div>
        
        <div style="background: rgba(102, 126, 234, 0.1); border-radius: 15px; padding: 20px; border-left: 4px solid #667eea;">
            <h3 style="color: #667eea; margin-bottom: 10px; font-size: 1.2rem;">⚖️ Your Rights</h3>
            <p style="color: #555; margin: 0;">Access, update, or delete your personal information. Contact us to exercise these rights.</p>
        </div>
        
        <div style="background: rgba(102, 126, 234, 0.1); border-radius: 15px; padding: 20px; border-left: 4px solid #667eea;">
            <h3 style="color: #667eea; margin-bottom: 10px; font-size: 1.2rem;">📧 Contact Us</h3>
            <p style="color: #555; margin: 0;">Questions about this privacy policy? Contact us at <a href="mailto:info@grantgeniushub.com" style="color: #667eea;">info@grantgeniushub.com</a></p>
        </div>
    </div>
    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 15px; text-align: center;">
        <h3 style="margin-bottom: 10px;">🌟 Commitment to Privacy</h3>
        <p style="margin: 0; opacity: 0.9;">We are committed to protecting your privacy and handling your data responsibly. This policy is regularly updated to reflect our practices and legal requirements.</p>
    </div>
    <h3>Third-Party Services</h3>
    <p>We may use third-party services (like AI processing and analytics tools) to provide our grant writing assistance. These services are carefully selected and bound by strict data protection agreements to ensure your information remains secure.</p>
    <h3>Support & Questions</h3>
    <p>Need help with your account or have privacy concerns? Our support team is here to assist you. Call us at 720-306-1898 for immediate assistance with any privacy-related questions or requests.</p>
</div>
<div class="walking-ai" id="walkingAI">
    <div class="speech-bubble" id="speechBubble">
        Hello! I'm your Grant Assistant! 👋
    </div>
    <div class="ai-character-body">
        <div class="ai-head">
            <div class="ai-eyes">
                <div class="eye"></div>
                <div class="eye"></div>
            </div>
            <div class="ai-mouth"></div>
        </div>
        <div class="ai-torso">
            <div class="ai-arms">
                <div class="arm left"></div>
                <div class="arm right"></div>
            </div>
        </div>
        <div class="ai-legs-container">
            <div class="leg left"></div>
            <div class="leg right"></div>
        </div>
        <div class="ai-shadow"></div>
    </div>
</div>

<!-- ADD THIS JAVASCRIPT RIGHT BEFORE THE CLOSING </body> TAG -->

<script>
class WalkingAI {
    constructor() {
        this.character = document.getElementById('walkingAI');
        this.speechBubble = document.getElementById('speechBubble');
        this.currentX = Math.random() * (window.innerWidth - 100);
        this.currentY = Math.random() * (window.innerHeight - 150) + 50;
        this.targetX = this.currentX;
        this.targetY = this.currentY;
        this.speed = 1;
        this.isMoving = false;
        this.direction = 1; // 1 for right, -1 for left
        
        this.messages = [
            "Hi! Need help with grants? 💰",
            "I can help you write proposals! 📝",
            "Looking for funding opportunities? 🔍",
            "Click me to get started! 🚀",
            "Grant writing made easy! ✨",
            "Let's secure your funding! 🎯",
            "Need a budget plan? 📊",
            "I'm here to help! 😊",
            "Ready to write grants? 💪",
            "Funding success awaits! 🌟"
        ];
        
        this.init();
    }
    
    init() {
        this.character.style.left = this.currentX + 'px';
        this.character.style.top = this.currentY + 'px';
        
        // Start moving after a delay
        setTimeout(() => {
            this.startWalking();
        }, 2000);
        
        // Show initial message
        this.showMessage();
        
        // Click handler
        this.character.addEventListener('click', () => {
            this.onCharacterClick();
        });
        
        // Regular movement
        setInterval(() => {
            this.moveToRandomPosition();
        }, 5000);
        
        // Regular messages
        setInterval(() => {
            this.showMessage();
        }, 8000);
        
        // Handle window resize
        window.addEventListener('resize', () => {
            this.handleResize();
        });
    }
    
    startWalking() {
        this.moveToRandomPosition();
    }
    
    moveToRandomPosition() {
        const margin = 100;
        this.targetX = Math.random() * (window.innerWidth - margin - 100) + margin;
        this.targetY = Math.random() * (window.innerHeight - 200) + 50;
        
        this.startMoving();
    }
    
    startMoving() {
        if (this.isMoving) return;
        
        this.isMoving = true;
        const deltaX = this.targetX - this.currentX;
        const deltaY = this.targetY - this.currentY;
        const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);
        
        if (distance < 5) {
            this.isMoving = false;
            return;
        }
        
        // Set direction based on movement
        this.direction = deltaX > 0 ? 1 : -1;
        this.character.style.transform = `scaleX(${this.direction})`;
        
        const stepX = (deltaX / distance) * this.speed;
        const stepY = (deltaY / distance) * this.speed;
        
        const moveStep = () => {
            if (!this.isMoving) return;
            
            this.currentX += stepX;
            this.currentY += stepY;
            
            this.character.style.left = this.currentX + 'px';
            this.character.style.top = this.currentY + 'px';
            
            const newDistance = Math.sqrt(
                (this.targetX - this.currentX) ** 2 + 
                (this.targetY - this.currentY) ** 2
            );
            
            if (newDistance > 5) {
                requestAnimationFrame(moveStep);
            } else {
                this.isMoving = false;
            }
        };
        
        requestAnimationFrame(moveStep);
    }
    
    showMessage() {
        const message = this.messages[Math.floor(Math.random() * this.messages.length)];
        this.speechBubble.textContent = message;
        this.speechBubble.classList.add('show');
        this.character.classList.add('talking');
        
        setTimeout(() => {
            this.speechBubble.classList.remove('show');
            this.character.classList.remove('talking');
        }, 3000);
    }
    
    onCharacterClick() {
        // Stop current movement
        this.isMoving = false;
        
        // Show special message
        this.speechBubble.textContent = "Hi! I'm your Grant Assistant! How can I help you today?";
        this.speechBubble.classList.add('show');
        this.character.classList.add('talking');
        
        // Redirect to chat or main form
        setTimeout(() => {
            const promptTextarea = document.getElementById('prompt');
            if (promptTextarea) {
                promptTextarea.focus();
                promptTextarea.value = "Hi! I'd like help with ";
            }
        }, 1000);
        
        setTimeout(() => {
            this.speechBubble.classList.remove('show');
            this.character.classList.remove('talking');
            // Resume walking
            setTimeout(() => {
                this.moveToRandomPosition();
            }, 2000);
        }, 4000);
    }
    
    handleResize() {
        const maxX = window.innerWidth - 100;
        const maxY = window.innerHeight - 150;
        
        if (this.currentX > maxX) this.currentX = maxX;
        if (this.currentY > maxY) this.currentY = maxY;
        if (this.currentX < 0) this.currentX = 0;
        if (this.currentY < 50) this.currentY = 50;
        
        this.character.style.left = this.currentX + 'px';
        this.character.style.top = this.currentY + 'px';
    }
}

// Initialize the walking AI when page loads
document.addEventListener('DOMContentLoaded', () => {
    new WalkingAI();
});

// Fallback initialization
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => {
        new WalkingAI();
    });
} else {
    new WalkingAI();
}
</script>
</body>
</html>

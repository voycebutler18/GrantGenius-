<!DOCTYPE html>
<html lang="en">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-CDYX6KH44X"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-CDYX6KH44X');
</script>
<!-- ‚úÖ Google AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7998800421976252" crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grant Genius Hub - AI-Powered Grant Assistant</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            color: white;
            text-decoration: none;
        }

        .nav-links {
            display: flex;
            gap: 20px;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 25px;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.1);
        }

        .nav-links a:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .nav-links a.active {
            background: rgba(255, 255, 255, 0.3);
        }

        .hero {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .hero p {
            font-size: 1.3rem;
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .hero .subtext {
            font-size: 1.1rem;
            opacity: 0.8;
        }

        .main-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .assistant-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
        }

        .assistant-avatar {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
        }

        .assistant-info h2 {
            color: #333;
            font-size: 1.8rem;
            margin-bottom: 5px;
        }

        .assistant-info p {
            color: #666;
            font-size: 1.1rem;
        }

        .categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .category {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .category:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            border-color: #667eea;
        }

        .category-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .category h3 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .category p {
            color: #666;
            font-size: 0.9rem;
        }

        .assistant-message {
            background: rgba(102, 126, 234, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            border-left: 4px solid #667eea;
        }

        .assistant-message .message-avatar {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: white;
            float: left;
            margin-right: 15px;
        }

        .assistant-message .message-content {
            color: #555;
            font-size: 1rem;
            line-height: 1.6;
        }

        .form-container {
            margin-top: 30px;
        }

        .form-group {
            position: relative;
            margin-bottom: 20px;
        }

        .form-group textarea {
            width: 100%;
            min-height: 120px;
            padding: 20px;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            font-size: 1rem;
            font-family: inherit;
            resize: vertical;
            transition: all 0.3s ease;
            background: white;
        }

        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .form-group textarea::placeholder {
            color: #999;
        }

        .char-counter {
            position: absolute;
            bottom: 10px;
            right: 15px;
            font-size: 0.8rem;
            color: #999;
        }

        .submit-container {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .btn-primary:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
            border: 1px solid rgba(102, 126, 234, 0.3);
        }

        .btn-secondary:hover {
            background: rgba(102, 126, 234, 0.2);
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
            color: #667eea;
        }

        .loading.active {
            display: block;
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error-message {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 1px solid #f5c6cb;
        }

        .quick-actions {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .quick-action {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(102, 126, 234, 0.2);
        }

        .quick-action:hover {
            background: rgba(102, 126, 234, 0.2);
            transform: translateY(-1px);
        }

        @media (max-width: 768px) {
            .nav {
                flex-direction: column;
                gap: 15px;
            }

            .nav-links {
                flex-wrap: wrap;
                justify-content: center;
            }

            .hero h1 {
                font-size: 2.5rem;
            }

            .main-card {
                padding: 20px;
            }

            .categories {
                grid-template-columns: 1fr;
            }

            .assistant-header {
                flex-direction: column;
                text-align: center;
            }

            .submit-container {
                flex-direction: column;
            }
        }
 * AI Character Styles */
.ai-character {
    position: fixed;
    width: 80px;
    height: 80px;
    cursor: pointer;
    transition: all 0.5s ease;
    z-index: 1000;
    bottom: 20px;
    right: 20px;
}

.ai-body {
    width: 60px;
    height: 60px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    border-radius: 50%;
    position: relative;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    animation: float 3s ease-in-out infinite;
}

.ai-face {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: white;
    font-size: 24px;
    animation: blink 4s infinite;
}

.ai-glow {
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(102, 126, 234, 0.3) 0%, transparent 70%);
    animation: pulse 2s infinite;
}

.ai-legs {
    position: absolute;
    bottom: -10px;
    left: 50%;
    transform: translateX(-50%);
    width: 30px;
    height: 20px;
}

.leg {
    position: absolute;
    width: 8px;
    height: 20px;
    background: #667eea;
    border-radius: 4px;
    animation: walk 1s infinite;
}

.leg:nth-child(1) {
    left: 6px;
}

.leg:nth-child(2) {
    right: 6px;
    animation-delay: 0.5s;
}

.ai-character.walking .leg {
    animation-play-state: running;
}

.ai-character.walking {
    animation: walkMove 4s linear infinite;
}

/* Chat Bubble */
.chat-bubble {
    position: fixed;
    background: white;
    border-radius: 20px;
    padding: 15px 20px;
    max-width: 300px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    opacity: 0;
    transform: translateY(20px);
    transition: all 0.3s ease;
    z-index: 1001;
    border: 2px solid #667eea;
}

.chat-bubble.show {
    opacity: 1;
    transform: translateY(0);
}

.chat-bubble::after {
    content: '';
    position: absolute;
    bottom: -10px;
    left: 20px;
    width: 0;
    height: 0;
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;
    border-top: 10px solid white;
}

.chat-input {
    position: fixed;
    bottom: 120px;
    right: 20px;
    background: white;
    border-radius: 25px;
    padding: 10px 20px;
    border: 2px solid #667eea;
    width: 300px;
    opacity: 0;
    transform: translateY(20px);
    transition: all 0.3s ease;
    z-index: 1001;
}

.chat-input.show {
    opacity: 1;
    transform: translateY(0);
}

.chat-input input {
    width: 100%;
    border: none;
    outline: none;
    font-size: 14px;
    padding: 5px;
}

.chat-input button {
    background: #667eea;
    color: white;
    border: none;
    border-radius: 15px;
    padding: 5px 15px;
    cursor: pointer;
    font-size: 12px;
    margin-left: 10px;
}

/* Animations */
@keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
}

@keyframes blink {
    0%, 90%, 100% { content: 'ü§ñ'; }
    95% { content: 'üòä'; }
}

@keyframes pulse {
    0% { opacity: 0.6; transform: scale(1); }
    50% { opacity: 1; transform: scale(1.1); }
    100% { opacity: 0.6; transform: scale(1); }
}

@keyframes walk {
    0%, 100% { transform: rotate(0deg); }
    50% { transform: rotate(20deg); }
}

@keyframes walkMove {
    0% { right: 20px; }
    25% { right: 50%; }
    50% { right: 20px; }
    75% { right: 50%; }
    100% { right: 20px; }
}

.typing-indicator {
    display: flex;
    align-items: center;
    gap: 4px;
}

.typing-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: #667eea;
    animation: typing 1.4s infinite;
}

.typing-dot:nth-child(2) { animation-delay: 0.2s; }
.typing-dot:nth-child(3) { animation-delay: 0.4s; }

@keyframes typing {
    0%, 60%, 100% { opacity: 0.3; }
    30% { opacity: 1; }
}   
    </style>
</head>
<body>
    <div class="container">
        <header>
            <nav class="nav">
                <a href="{{ url_for('home') }}" class="logo">Grant Genius Hub</a>
                <div class="nav-links">
                    <a href="{{ url_for('home') }}" class="active">Home</a>
                    <a href="{{ url_for('about') }}">About</a>
                    <a href="{{ url_for('templates_page') }}">Templates</a>
                </div>
            </nav>
        </header>

        <div class="hero">
            <h1>Grant Genius Hub</h1>
            <p>Your AI-Powered Grant Assistant</p>
            <div class="subtext">Transform your funding ideas into professional grant proposals with intelligent conversation</div>
        </div>

        <div class="main-card">
            <div class="assistant-header">
                <div class="assistant-avatar">ü§ñ</div>
                <div class="assistant-info">
                    <h2>Grant Assistant</h2>
                    <p>Tell me about your project and I'll help you create the perfect grant proposal!</p>
                </div>
            </div>

            <div class="categories">
                <div class="category" onclick="selectCategory('nonprofit')">
                    <div class="category-icon">üèõÔ∏è</div>
                    <h3>Nonprofit & Community</h3>
                    <p>Social services, community development, charitable organizations</p>
                </div>
                <div class="category" onclick="selectCategory('education')">
                    <div class="category-icon">üéì</div>
                    <h3>Education & Research</h3>
                    <p>Schools, universities, research projects, educational programs</p>
                </div>
                <div class="category" onclick="selectCategory('health')">
                    <div class="category-icon">üè•</div>
                    <h3>Health & Medical</h3>
                    <p>Healthcare initiatives, medical research, public health</p>
                </div>
                <div class="category" onclick="selectCategory('environmental')">
                    <div class="category-icon">üå±</div>
                    <h3>Environmental</h3>
                    <p>Sustainability, conservation, climate change, green technology</p>
                </div>
            </div>

            <div class="assistant-message">
                <div class="message-avatar">ü§ñ</div>
                <div class="message-content">
                    Hello! I'm your Grant Assistant. I can help you create professional grant proposals for any type of project. Click on a grant type above or simply describe your project in detail below. What kind of funding are you looking for?
                </div>
            </div>

            {% if error %}
            <div class="error-message">
                {{ error }}
            </div>
            {% endif %}

            <form method="POST" action="{{ url_for('generate_grant_response') }}" id="grantForm">
                <div class="form-container">
                    <div class="quick-actions">
                        <span class="quick-action" onclick="addQuickText('I need help writing a problem statement for')">Problem Statement</span>
                        <span class="quick-action" onclick="addQuickText('I need a budget justification for')">Budget Justification</span>
                        <span class="quick-action" onclick="addQuickText('I need an evaluation plan for')">Evaluation Plan</span>
                        <span class="quick-action" onclick="addQuickText('I need a methodology section for')">Methodology</span>
                    </div>

                    <div class="form-group">
                        <textarea 
                            name="prompt" 
                            id="prompt" 
                            placeholder="Describe your project in detail. Include information about your organization, target population, objectives, and what type of grant section you need help with..."
                            required
                            oninput="updateCharCount()"
                        ></textarea>
                        <div class="char-counter">
                            <span id="charCount">0</span> characters
                        </div>
                    </div>

                    <div class="submit-container">
                        <a href="{{ url_for('templates_page') }}" class="btn btn-secondary">Use Templates</a>
                        <button type="submit" class="btn btn-primary" id="submitBtn">
                            <span>Generate Proposal</span>
                            <span>‚Üí</span>
                        </button>
                    </div>
                </div>
            </form>

            <div class="loading" id="loadingDiv">
                <div class="spinner"></div>
                <p>Generating your grant proposal content...</p>
            </div>
        </div>

        <hr style="margin: 50px 0; border: 1px solid rgba(255,255,255,0.2);">
        <h2 style="color: white; margin-bottom: 10px;">Find Real Grants Near You</h2>
        <form id="liveSearchForm" style="margin-bottom: 30px;">
            <input type="text" id="liveQuery" placeholder="What kind of grant?" required style="padding: 10px; width: 40%; border-radius: 10px; border: none; margin-right: 10px;">
            <input type="text" id="liveLocation" placeholder="City or State" style="padding: 10px; width: 25%; border-radius: 10px; border: none; margin-right: 10px;">
            <button type="submit" class="btn btn-primary">Search Grants</button>
        </form>
        <div id="liveResults" style="background: white; border-radius: 15px; padding: 20px;"></div>
    </div>

    <script>
        function updateCharCount() {
            const textarea = document.getElementById('prompt');
            const charCount = document.getElementById('charCount');
            charCount.textContent = textarea.value.length;
        }

        function selectCategory(category) {
            const textarea = document.getElementById('prompt');
            let prompt = '';
            
            switch(category) {
                case 'nonprofit':
                    prompt = 'I need help writing a grant proposal for a nonprofit organization focused on ';
                    break;
                case 'education':
                    prompt = 'I need help writing a grant proposal for an educational project that ';
                    break;
                case 'health':
                    prompt = 'I need help writing a grant proposal for a health/medical initiative that ';
                    break;
                case 'environmental':
                    prompt = 'I need help writing a grant proposal for an environmental project that ';
                    break;
            }
            
            textarea.value = prompt;
            textarea.focus();
            updateCharCount();
        }

        function addQuickText(text) {
            const textarea = document.getElementById('prompt');
            textarea.value = text + ' ';
            textarea.focus();
            updateCharCount();
        }

        // Handle form submission
        document.getElementById('grantForm').addEventListener('submit', function(e) {
            const submitBtn = document.getElementById('submitBtn');
            const loadingDiv = document.getElementById('loadingDiv');
            
            // Show loading state
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<span>Generating...</span>';
            loadingDiv.classList.add('active');
        });

        // Check for template from localStorage (from templates page)
        window.addEventListener('load', function() {
            const selectedTemplate = localStorage.getItem('selectedTemplate');
            if (selectedTemplate) {
                document.getElementById('prompt').value = selectedTemplate;
                updateCharCount();
                localStorage.removeItem('selectedTemplate');
            }
        });

        document.getElementById('liveSearchForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const query = document.getElementById('liveQuery').value;
            const location = document.getElementById('liveLocation').value;
            const resultsDiv = document.getElementById('liveResults');
            
            resultsDiv.innerHTML = `<p style="color:#666">Searching...</p>`;
            try {
                const res = await fetch(`/search?query=${encodeURIComponent(query)}&location=${encodeURIComponent(location)}`);
                const data = await res.json();
                if (!data.items) {
                    resultsDiv.innerHTML = "<p>No results found.</p>";
                    return;
                }
                resultsDiv.innerHTML = data.items.map(item => `
                    <div style="margin-bottom: 20px;">
                        <h3><a href="${item.link}" target="_blank" style="color:#667eea;">${item.title}</a></h3>
                        <p style="color:#333;">${item.snippet}</p>
                    </div>
                `).join('');
            } catch (error) {
                resultsDiv.innerHTML = "<p style='color:red;'>Error fetching results. Try again.</p>";
            }
        });

        // Initialize character count
        updateCharCount();
    </script>
<div class="main-card">
    <div class="assistant-header">
        <div class="assistant-avatar">üîí</div>
        <div class="assistant-info">
            <h2>Privacy Policy</h2>
            <p>Your privacy and data security are our top priorities</p>
        </div>
    </div>
    
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; margin-bottom: 30px;">
        <div style="background: rgba(102, 126, 234, 0.1); border-radius: 15px; padding: 20px; border-left: 4px solid #667eea;">
            <h3 style="color: #667eea; margin-bottom: 10px; font-size: 1.2rem;">üìã Information We Collect</h3>
            <p style="color: #555; margin: 0;">Project descriptions, organizational details, and information you submit to generate grant proposals.</p>
        </div>
        
        <div style="background: rgba(102, 126, 234, 0.1); border-radius: 15px; padding: 20px; border-left: 4px solid #667eea;">
            <h3 style="color: #667eea; margin-bottom: 10px; font-size: 1.2rem;">üîß How We Use Your Data</h3>
            <p style="color: #555; margin: 0;">Generate proposals, improve AI performance, provide support, and analyze usage patterns.</p>
        </div>
        
        <div style="background: rgba(102, 126, 234, 0.1); border-radius: 15px; padding: 20px; border-left: 4px solid #667eea;">
            <h3 style="color: #667eea; margin-bottom: 10px; font-size: 1.2rem;">üõ°Ô∏è Data Security</h3>
            <p style="color: #555; margin: 0;">We implement robust security measures to protect against unauthorized access, alteration, or destruction.</p>
        </div>
        
        <div style="background: rgba(102, 126, 234, 0.1); border-radius: 15px; padding: 20px; border-left: 4px solid #667eea;">
            <h3 style="color: #667eea; margin-bottom: 10px; font-size: 1.2rem;">‚è∞ Data Retention</h3>
            <p style="color: #555; margin: 0;">Information retained only as long as necessary to provide services and comply with legal obligations.</p>
        </div>
        
        <div style="background: rgba(102, 126, 234, 0.1); border-radius: 15px; padding: 20px; border-left: 4px solid #667eea;">
            <h3 style="color: #667eea; margin-bottom: 10px; font-size: 1.2rem;">‚öñÔ∏è Your Rights</h3>
            <p style="color: #555; margin: 0;">Access, update, or delete your personal information. Contact us to exercise these rights.</p>
        </div>
        
        <div style="background: rgba(102, 126, 234, 0.1); border-radius: 15px; padding: 20px; border-left: 4px solid #667eea;">
            <h3 style="color: #667eea; margin-bottom: 10px; font-size: 1.2rem;">üìß Contact Us</h3>
            <p style="color: #555; margin: 0;">Questions about this privacy policy? Contact us at <a href="mailto:info@grantgeniushub.com" style="color: #667eea;">info@grantgeniushub.com</a></p>
        </div>
    </div>
    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 15px; text-align: center;">
        <h3 style="margin-bottom: 10px;">üåü Commitment to Privacy</h3>
        <p style="margin: 0; opacity: 0.9;">We are committed to protecting your privacy and handling your data responsibly. This policy is regularly updated to reflect our practices and legal requirements.</p>
    </div>
    <h3>Third-Party Services</h3>
    <p>We may use third-party services (like AI processing and analytics tools) to provide our grant writing assistance. These services are carefully selected and bound by strict data protection agreements to ensure your information remains secure.</p>
    <h3>Support & Questions</h3>
    <p>Need help with your account or have privacy concerns? Our support team is here to assist you. Call us at 720-306-1898 for immediate assistance with any privacy-related questions or requests.</p>
</div>
<div class="ai-character" id="aiCharacter">
    <div class="ai-glow"></div>
    <div class="ai-body">
        <div class="ai-face">ü§ñ</div>
    </div>
    <div class="ai-legs">
        <div class="leg"></div>
        <div class="leg"></div>
    </div>
</div>

<!-- Chat Bubble -->
<div class="chat-bubble" id="chatBubble">
    <div id="chatContent">Hi! I'm your Grant Assistant. Click me to chat!</div>
</div>

<!-- Chat Input -->
<div class="chat-input" id="chatInput">
    <input type="text" id="userInput" placeholder="Ask me about grants..." maxlength="200">
    <button onclick="sendMessage()">Send</button>
</div>

<!-- ADD THIS JAVASCRIPT RIGHT BEFORE THE CLOSING </body> TAG (after the HTML above) -->

<script>
const aiCharacter = document.getElementById('aiCharacter');
const chatBubble = document.getElementById('chatBubble');
const chatContent = document.getElementById('chatContent');
const chatInput = document.getElementById('chatInput');
const userInput = document.getElementById('userInput');

let isWalking = false;
let chatOpen = false;
let conversationHistory = [];

// AI responses for grant-related topics
const aiResponses = {
    greeting: [
        "Hi there! I'm your Grant Genius Assistant! üöÄ",
        "Hello! Ready to write some amazing grant proposals? üí°",
        "Hey! I'm here to help you secure funding for your projects! üéØ"
    ],
    
    help: [
        "I can help you with grant writing, finding funding opportunities, and creating compelling proposals!",
        "I'm here to assist with problem statements, budgets, evaluation plans, and more!",
        "Ask me about grant types, application tips, or specific sections of your proposal!"
    ],
    
    grants: [
        "There are many types of grants available! What's your project focus - nonprofit, education, health, or environmental?",
        "I can help you find the perfect grant opportunity. Tell me more about your organization and goals!",
        "Grant funding is available for various sectors. What kind of impact are you hoping to make?"
    ],
    
    writing: [
        "Great question! Strong grant proposals need clear problem statements, measurable objectives, and detailed budgets.",
        "The key to successful grant writing is storytelling with data. Show the need, present your solution, and prove impact!",
        "I can help you craft compelling narratives that funders love. What section are you working on?"
    ],
    
    default: [
        "That's interesting! Can you tell me more about your project or grant needs?",
        "I'd love to help with that! What specific aspect of grant writing are you working on?",
        "Great question! How can I assist you with your grant proposal today?"
    ]
};

// Show initial greeting
setTimeout(() => {
    showMessage(getRandomResponse('greeting'));
}, 1000);

// Character click handler
aiCharacter.addEventListener('click', () => {
    if (!chatOpen) {
        openChat();
    } else {
        closeChat();
    }
});

// Walking animation
function startWalking() {
    if (!isWalking) {
        isWalking = true;
        aiCharacter.classList.add('walking');
        
        setTimeout(() => {
            stopWalking();
        }, 4000);
    }
}

function stopWalking() {
    isWalking = false;
    aiCharacter.classList.remove('walking');
}

// Random walking
setInterval(() => {
    if (Math.random() > 0.7 && !chatOpen) {
        startWalking();
    }
}, 8000);

// Chat functions
function openChat() {
    chatOpen = true;
    chatInput.classList.add('show');
    userInput.focus();
}

function closeChat() {
    chatOpen = false;
    chatInput.classList.remove('show');
    chatBubble.classList.remove('show');
}

function showMessage(message) {
    chatContent.innerHTML = message;
    chatBubble.classList.add('show');
    
    // Position bubble above character
    const rect = aiCharacter.getBoundingClientRect();
    chatBubble.style.bottom = (window.innerHeight - rect.top + 20) + 'px';
    chatBubble.style.right = (window.innerWidth - rect.right) + 'px';
    
    setTimeout(() => {
        if (!chatOpen) {
            chatBubble.classList.remove('show');
        }
    }, 4000);
}

function showTyping() {
    chatContent.innerHTML = `
        <div class="typing-indicator">
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
        </div>
    `;
    chatBubble.classList.add('show');
}

function getRandomResponse(category) {
    const responses = aiResponses[category];
    return responses[Math.floor(Math.random() * responses.length)];
}

function getAIResponse(userMessage) {
    const message = userMessage.toLowerCase();
    
    if (message.includes('hello') || message.includes('hi') || message.includes('hey')) {
        return getRandomResponse('greeting');
    } else if (message.includes('help') || message.includes('what can you do')) {
        return getRandomResponse('help');
    } else if (message.includes('grant') || message.includes('funding') || message.includes('money')) {
        return getRandomResponse('grants');
    } else if (message.includes('write') || message.includes('proposal') || message.includes('application')) {
        return getRandomResponse('writing');
    } else if (message.includes('budget')) {
        return "I can help you create detailed budgets and justifications. What's your project budget range?";
    } else if (message.includes('nonprofit')) {
        return "Nonprofit grants are my specialty! I can help with community impact, social services, and charitable project proposals.";
    } else if (message.includes('education')) {
        return "Educational grants are crucial for learning! I can assist with school programs, research projects, and student support initiatives.";
    } else if (message.includes('health')) {
        return "Health and medical grants can transform communities! Tell me about your healthcare initiative.";
    } else if (message.includes('environment')) {
        return "Environmental grants are so important! I can help with sustainability, conservation, and green technology proposals.";
    } else if (message.includes('thank')) {
        return "You're welcome! I'm here whenever you need grant writing support! üòä";
    } else if (message.includes('bye')) {
        return "Goodbye! Feel free to click me anytime for grant help! üëã";
    } else {
        return getRandomResponse('default');
    }
}

function sendMessage() {
    const message = userInput.value.trim();
    if (!message) return;
    
    // Add to conversation history
    conversationHistory.push({ type: 'user', message: message });
    
    // Show user message briefly
    showMessage(`You: ${message}`);
    
    // Clear input
    userInput.value = '';
    
    // Show typing indicator
    setTimeout(() => {
        showTyping();
    }, 1000);
    
    // Generate AI response
    setTimeout(() => {
        const response = getAIResponse(message);
        conversationHistory.push({ type: 'ai', message: response });
        showMessage(response);
    }, 2500);
}

// Enter key handler
userInput.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') {
        sendMessage();
    }
});

// Close chat when clicking outside
document.addEventListener('click', (e) => {
    if (chatOpen && !aiCharacter.contains(e.target) && !chatInput.contains(e.target) && !chatBubble.contains(e.target)) {
        closeChat();
    }
});

// Responsive positioning
window.addEventListener('resize', () => {
    if (chatBubble.classList.contains('show')) {
        const rect = aiCharacter.getBoundingClientRect();
        chatBubble.style.bottom = (window.innerHeight - rect.top + 20) + 'px';
        chatBubble.style.right = (window.innerWidth - rect.right) + 'px';
    }
});
</script>
</body>
</html>
